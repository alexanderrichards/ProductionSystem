<!DOCTYPE html>
<html>
<head>
<!-- TiTaToggle CSS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/titatoggle/1.2.11/titatoggle-dist-min.css">

<script type="text/javascript">
$(document).ready(function () {
      $.ajax({
        url: "/users",
        type: "GET",
        cache: true,
        dataType: "json",
        error: function(request, status, error){
          console.warn(`Error getting users!\nstatus: ${status}\nerror: ${error}\nrequest: ` + JSON.stringify(request));
          bootstrap_alert("Attention!", `Error getting users! status: ${status} error: ${error}`, "alert-danger");
        },
        success: function(response, status, request){
          $.each(response, function(index, value){
            var checked = value.admin? "checked": "";
            $("body").append(`
            <div class="checkbox checkbox-slider-info checkbox-slider--b"> <!-- could have checkbox-slider--b-flat -->
              <label>
    	        <input type="checkbox" id=${value.id} ${checked}checked><span><span class="glyphicon glyphicon-user text-primary"/> ${value.name}</span>
              </label>
            </div>`);
          });
        }
      });


  $(".checkbox input").change(function(){
    var chkbox = $(this);
    $.ajax({url: "/users/" + chkbox.attr("id"),
            type: "PUT",
            data: {"admin": chkbox.prop("checked")}});
  });
});
</script>

<title>LZ Production Admins</title>
</head>
<body>
</body>
</html>